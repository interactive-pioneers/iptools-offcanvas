/*! iptools-offcanvas - v0.1.0 - 2017-05-05
* https://github.com/interactive-pioneers/iptools-offcanvas
* Copyright Â© 2017 Interactive Pioneers GmbH; Licensed GPL-3.0 */

!function(a,b){"use strict";function c(a){a.target===this.element||this.element.contains(a.target)||this.toggle(!1)}function d(){this.settings.closeOnClickOutside&&!this.settings.static&&b.addEventListener("click",this.documentHandler)}function e(){b.removeEventListener("click",this.documentHandler)}function f(){this.settings.static&&this.settings.staticCondition()&&this.element.dispatchEvent(new Event("open")),this.element.classList.add(this.settings.baseClass+p.initialized)}function g(a){a.target.IPTOffCanvas.toggle(!0),a.stopPropagation()}function h(a){a.target.IPTOffCanvas.toggle(!1),a.stopPropagation()}function i(a){a.target.IPTOffCanvas.toggle(),a.stopPropagation()}function j(){var a=this;this.element.IPTOffCanvas=a,this.element.addEventListener("open",g),this.element.addEventListener("close",h),this.element.addEventListener("toggle",i),this.openNodes.forEach(function(b){b.IPTOffCanvas=a,b.addEventListener("click",g)}),this.closeNodes.forEach(function(b){b.IPTOffCanvas=a,b.addEventListener("click",h)}),this.toggleNodes.forEach(function(b){b.IPTOffCanvas=a,b.addEventListener("click",i)})}function k(a,g){this.settings=Object.assign({},n,g),this.element=b.getElementById(a),this.initializeHandler=f.bind(this),this.addEventHandler=j.bind(this),this.documentHandler=c.bind(this),this.bindDocHandler=d.bind(this),this.unbindDocHandler=e.bind(this),this.openNodes=b.querySelectorAll("[data-"+l.open+'="'+a+'"]'),this.closeNodes=b.querySelectorAll("[data-"+l.close+'="'+a+'"]'),this.toggleNodes=b.querySelectorAll("[data-"+l.toggle+'="'+a+'"]'),this.element.classList.add(this.settings.baseClass+o[this.settings.type].baseClass),this.addEventHandler(),this.initializeHandler()}var l={open:"offcanvas-open",close:"offcanvas-close",toggle:"offcanvas-toggle"},m=function(){return!0},n={baseClass:"offcanvas",closeOnClickOutside:!1,single:!0,static:!1,staticCondition:m,type:"right"},o={top:{baseClass:"--top",activeClass:"--top--active"},right:{baseClass:"--right",activeClass:"--right--active"},bottom:{baseClass:"--bottom",activeClass:"--bottom--active"},left:{baseClass:"--left",activeClass:"--left--active"}},p={initialized:"--initialized"};k.prototype.getSettings=function(){return this.settings},k.prototype.isActive=function(){return this.element.classList.contains(this.settings.baseClass+o[this.settings.type].activeClass)},k.prototype.toggle=function(a){var c,d,e=this.settings.baseClass+o[this.settings.type].activeClass,f=this;void 0===a&&(a=!this.isActive()),this.settings.single&&a&&b.querySelectorAll("."+this.settings.baseClass+p.initialized).forEach(function(a){c=a.IPTOffCanvas,d=c.getSettings(),f.element===c.element||!c.isActive()||d.static&&d.staticCondition()||c.toggle(!1)});var g="";if(a&&!this.isActive()?(g="opened",this.bindDocHandler()):!a&&this.isActive()&&(g="closed",this.unbindDocHandler()),""!==g){var h=b.createEvent("CustomEvent");h.initEvent(g,!0,!0),this.element.dispatchEvent(h)}this.element.classList.toggle(e,a)},k.prototype.destroy=function(){delete this.element.IPTOffCanvas,this.element.removeEventListener("open",g),this.element.removeEventListener("close",h),this.element.removeEventListener("toggle",i),this.element.classList.remove(this.settings.baseClass+p.initialized),this.element.classList.remove(this.settings.baseClass+o[this.settings.type].activeClass),this.openNodes.forEach(function(a){delete a.IPTOffCanvas,a.removeEventListener("click",g)}),this.closeNodes.forEach(function(a){delete a.IPTOffCanvas,a.removeEventListener("click",h)}),this.toggleNodes.forEach(function(a){delete a.IPTOffCanvas,a.removeEventListener("click",i)})},a.IPTOffCanvas=k}(window,document);